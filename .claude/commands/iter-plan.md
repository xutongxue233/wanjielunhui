# 迭代计划命令

生成迭代计划与 P0/P1/P2 backlog。

## 执行步骤

1. **读取当前状态**
   - 检查 `reports/iteration/latest.json` 是否存在
   - 如存在，读取上一轮迭代结果

2. **扫描待办区域**
   - API 契约: 对比前后端 API 定义差异
   - 后台功能: 检查各管理页面功能覆盖
   - UI 问题: 检查已知的 UI/UX 问题
   - 持久化: 检查数据是否真正存储

3. **生成 Backlog**
   按优先级分类:
   - P0: 阻断性问题 (必须立即修复)
   - P1: 功能缺失 (本轮必须完成)
   - P2: 体验优化 (时间允许则处理)

4. **输出计划文件**
   写入 `reports/iteration/<timestamp>/iteration-plan.md`

## 输出格式

```markdown
# 迭代计划

生成时间: YYYY-MM-DD HH:mm:ss

## 目标

- [ ] 完成 API 契约审计
- [ ] 验收后台管理功能
- [ ] 修复所有 P0/P1 问题
- [ ] 多视口 UI 验证

## Backlog

### P0 - 阻断性
| ID | 描述 | 负责模块 |
|----|------|----------|
| - | - | - |

### P1 - 功能缺失
| ID | 描述 | 负责模块 |
|----|------|----------|
| - | - | - |

### P2 - 体验优化
| ID | 描述 | 负责模块 |
|----|------|----------|
| - | - | - |

## 执行顺序

1. /iter-api-audit
2. /iter-admin-audit
3. /iter-devtools-test
4. /iter-fix (如有问题)
5. 循环直到停止条件满足
```

## 退出条件

- 计划文件成功生成
- latest.json 更新为新时间戳

## 失败处理

- 无法读取文件: 创建新的迭代周期
- 生成失败: 报告错误，等待人工介入
