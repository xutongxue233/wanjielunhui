import type { Combatant, CombatSkill } from './index';
import type { Element } from '../../types';
import { v4 as uuidv4 } from 'uuid';

// 敌人模板
export interface EnemyTemplate {
  id: string;
  name: string;
  description: string;
  element: Element | 'neutral';
  level: number;

  // 基础属性倍率
  hpMultiplier: number;
  attackMultiplier: number;
  defenseMultiplier: number;
  speedMultiplier: number;

  // 技能列表
  skills: CombatSkill[];

  // 掉落
  expReward: number;
  spiritStoneReward: number;
  dropTable: { itemId: string; chance: number; quantity: number }[];
}

// ==================== 剧情专属敌人 ====================

export const STORY_ENEMY_TEMPLATES: Record<string, EnemyTemplate> = {
  // 第二章：青云考核
  qingyun_disciple: {
    id: 'qingyun_disciple',
    name: '青云弟子',
    description: '青云宗外门弟子，负责考核新人',
    element: 'wood',
    level: 3,
    hpMultiplier: 1.0,
    attackMultiplier: 0.8,
    defenseMultiplier: 0.8,
    speedMultiplier: 1.0,
    skills: [
      {
        id: 'basic_sword',
        name: '基础剑法',
        description: '青云宗入门剑法',
        type: 'attack',
        element: 'metal',
        mpCost: 8,
        cooldown: 2,
        currentCooldown: 0,
        damageMultiplier: 1.2,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'defense_stance',
        name: '防御姿态',
        description: '进入防御姿态，提升防御力',
        type: 'defense',
        element: 'neutral',
        mpCost: 10,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 20, duration: 2, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 50,
    spiritStoneReward: 30,
    dropTable: [],
  },

  // 第三章：妖狼巢穴
  small_demon_wolf: {
    id: 'small_demon_wolf',
    name: '小妖狼',
    description: '妖狼王的手下，身形敏捷',
    element: 'neutral',
    level: 4,
    hpMultiplier: 0.8,
    attackMultiplier: 0.9,
    defenseMultiplier: 0.5,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'bite',
        name: '撕咬',
        description: '锋利的獠牙撕咬敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 5,
        cooldown: 2,
        currentCooldown: 0,
        damageMultiplier: 1.3,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'howl',
        name: '嚎叫',
        description: '凄厉的嚎叫降低敌人防御',
        type: 'support',
        element: 'neutral',
        mpCost: 8,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 10, duration: 3, statusType: 'defense_down', chance: 0.6 },
        ],
      },
    ],
    expReward: 40,
    spiritStoneReward: 15,
    dropTable: [
      { itemId: 'wolf_fang', chance: 0.4, quantity: 1 },
      { itemId: 'wolf_pelt', chance: 0.3, quantity: 1 },
    ],
  },

  demon_wolf_king: {
    id: 'demon_wolf_king',
    name: '妖狼王',
    description: '统领狼群的妖兽，凶残狡诈，实力远超普通妖狼',
    element: 'neutral',
    level: 6,
    hpMultiplier: 2.5,
    attackMultiplier: 1.5,
    defenseMultiplier: 1.2,
    speedMultiplier: 1.1,
    skills: [
      {
        id: 'savage_bite',
        name: '狂暴撕咬',
        description: '凶猛的连续撕咬',
        type: 'attack',
        element: 'neutral',
        mpCost: 15,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 1.8,
        hitCount: 2,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'summon_wolves',
        name: '召唤狼群',
        description: '召唤狼群协同攻击',
        type: 'attack',
        element: 'neutral',
        mpCost: 20,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0.8,
        hitCount: 3,
        targetType: 'random',
        effects: [],
      },
      {
        id: 'bloodthirst',
        name: '嗜血狂化',
        description: '进入狂化状态，大幅提升攻击力',
        type: 'support',
        element: 'neutral',
        mpCost: 25,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 40, duration: 3, statusType: 'attack_up' },
        ],
      },
    ],
    expReward: 200,
    spiritStoneReward: 80,
    dropTable: [
      { itemId: 'wolf_fang', chance: 1.0, quantity: 3 },
      { itemId: 'demon_blood', chance: 0.8, quantity: 1 },
      { itemId: 'demon_core', chance: 0.3, quantity: 1 },
    ],
  },

  // 第四章：魔修入侵
  demon_cultivator: {
    id: 'demon_cultivator',
    name: '魔修弟子',
    description: '修炼魔功的邪道修士',
    element: 'neutral',
    level: 8,
    hpMultiplier: 1.2,
    attackMultiplier: 1.3,
    defenseMultiplier: 0.9,
    speedMultiplier: 1.1,
    skills: [
      {
        id: 'demon_qi_blast',
        name: '魔气冲击',
        description: '释放腐蚀性的魔气攻击',
        type: 'attack',
        element: 'neutral',
        mpCost: 15,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 1.6,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 8, duration: 2, statusType: 'poison', chance: 0.4 },
        ],
      },
      {
        id: 'blood_drain',
        name: '吸血术',
        description: '吸取敌人生命恢复自身',
        type: 'attack',
        element: 'neutral',
        mpCost: 20,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.2,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'heal', value: 30, chance: 1.0 },
        ],
      },
    ],
    expReward: 120,
    spiritStoneReward: 50,
    dropTable: [
      { itemId: 'demon_blood', chance: 0.5, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 20 },
    ],
  },

  demon_elder: {
    id: 'demon_elder',
    name: '魔修长老',
    description: '魔道高手，修为深厚，手段残忍',
    element: 'neutral',
    level: 12,
    hpMultiplier: 3.0,
    attackMultiplier: 2.0,
    defenseMultiplier: 1.5,
    speedMultiplier: 1.0,
    skills: [
      {
        id: 'demon_flame',
        name: '魔焰',
        description: '释放黑色魔焰焚烧敌人',
        type: 'attack',
        element: 'fire',
        mpCost: 25,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 15, duration: 3, statusType: 'burn', chance: 0.5 },
        ],
      },
      {
        id: 'soul_devour',
        name: '灵魂吞噬',
        description: '吞噬敌人灵魂造成巨大伤害',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 50,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'demon_barrier',
        name: '魔障',
        description: '召唤魔障抵御攻击',
        type: 'defense',
        element: 'neutral',
        mpCost: 30,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 50, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 500,
    spiritStoneReward: 200,
    dropTable: [
      { itemId: 'demon_core', chance: 0.8, quantity: 1 },
      { itemId: 'demon_blood', chance: 1.0, quantity: 3 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 100 },
    ],
  },
};

// 预设敌人模板
export const ENEMY_TEMPLATES: Record<string, EnemyTemplate> = {
  // 合并剧情敌人
  ...STORY_ENEMY_TEMPLATES,
  // 入门级敌人 (level 0-1)
  wild_rabbit: {
    id: 'wild_rabbit',
    name: '野兔',
    description: '温顺的山林小兽',
    element: 'wood',
    level: 0,
    hpMultiplier: 0.6,
    attackMultiplier: 0.4,
    defenseMultiplier: 0.3,
    speedMultiplier: 1.0,
    skills: [],
    expReward: 5,
    spiritStoneReward: 1,
    dropTable: [
      { itemId: 'beast_meat', chance: 0.5, quantity: 1 },
    ],
  },

  wild_chicken: {
    id: 'wild_chicken',
    name: '野鸡',
    description: '林间觅食的禽类',
    element: 'wood',
    level: 0,
    hpMultiplier: 0.5,
    attackMultiplier: 0.5,
    defenseMultiplier: 0.2,
    speedMultiplier: 0.8,
    skills: [],
    expReward: 5,
    spiritStoneReward: 1,
    dropTable: [
      { itemId: 'feather', chance: 0.6, quantity: 1 },
    ],
  },

  wild_boar: {
    id: 'wild_boar',
    name: '野猪',
    description: '山林中常见的野兽',
    element: 'earth',
    level: 1,
    hpMultiplier: 0.8,
    attackMultiplier: 0.6,
    defenseMultiplier: 0.4,
    speedMultiplier: 0.6,
    skills: [],
    expReward: 10,
    spiritStoneReward: 2,
    dropTable: [
      { itemId: 'beast_meat', chance: 0.8, quantity: 1 },
      { itemId: 'beast_bone', chance: 0.3, quantity: 1 },
    ],
  },

  spirit_wolf: {
    id: 'spirit_wolf',
    name: '灵狼',
    description: '吸收了天地灵气的狼妖',
    element: 'wood',
    level: 2,
    hpMultiplier: 1.0,
    attackMultiplier: 0.9,
    defenseMultiplier: 0.6,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'wolf_claw',
        name: '狼爪',
        description: '锋利的爪击',
        type: 'attack',
        element: 'wood',
        mpCost: 10,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 1.3,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
    ],
    expReward: 30,
    spiritStoneReward: 8,
    dropTable: [
      { itemId: 'wolf_fang', chance: 0.5, quantity: 1 },
      { itemId: 'spirit_essence', chance: 0.2, quantity: 1 },
    ],
  },

  fire_serpent: {
    id: 'fire_serpent',
    name: '火蛇',
    description: '浑身燃烧着烈焰的妖蛇',
    element: 'fire',
    level: 4,
    hpMultiplier: 0.9,
    attackMultiplier: 1.0,
    defenseMultiplier: 0.5,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'fire_breath',
        name: '火焰吐息',
        description: '喷射烈焰',
        type: 'attack',
        element: 'fire',
        mpCost: 15,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.5,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 5, duration: 2, statusType: 'burn', chance: 0.3 },
        ],
      },
    ],
    expReward: 60,
    spiritStoneReward: 20,
    dropTable: [
      { itemId: 'fire_essence', chance: 0.4, quantity: 1 },
      { itemId: 'serpent_scale', chance: 0.6, quantity: 2 },
    ],
  },

  rock_golem: {
    id: 'rock_golem',
    name: '岩石傀儡',
    description: '由灵石凝聚而成的傀儡',
    element: 'earth',
    level: 8,
    hpMultiplier: 2.0,
    attackMultiplier: 1.3,
    defenseMultiplier: 2.0,
    speedMultiplier: 0.5,
    skills: [
      {
        id: 'rock_smash',
        name: '岩石粉碎',
        description: '以巨大的石拳砸向敌人',
        type: 'attack',
        element: 'earth',
        mpCost: 20,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
    ],
    expReward: 100,
    spiritStoneReward: 50,
    dropTable: [
      { itemId: 'earth_crystal', chance: 0.5, quantity: 1 },
      { itemId: 'golem_core', chance: 0.2, quantity: 1 },
    ],
  },

  wandering_cultivator: {
    id: 'wandering_cultivator',
    name: '散修',
    description: '游荡的修士',
    element: 'neutral',
    level: 10,
    hpMultiplier: 1.5,
    attackMultiplier: 1.5,
    defenseMultiplier: 1.2,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'sword_qi',
        name: '剑气',
        description: '凝聚剑意化为剑气',
        type: 'attack',
        element: 'metal',
        mpCost: 25,
        cooldown: 2,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'minor_healing',
        name: '小回春术',
        description: '恢复少量生命',
        type: 'support',
        element: 'wood',
        mpCost: 30,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.5,
        hitCount: 1,
        targetType: 'self',
        effects: [],
      },
    ],
    expReward: 150,
    spiritStoneReward: 80,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 10 },
      { itemId: 'technique_fragment', chance: 0.1, quantity: 1 },
    ],
  },

  // ==================== 金丹期敌人 (level 13-18) ====================

  fire_scorpion: {
    id: 'fire_scorpion',
    name: '火焰蝎',
    description: '浑身燃烧着赤焰的巨蝎，尾刺含有剧毒',
    element: 'fire',
    level: 13,
    hpMultiplier: 1.3,
    attackMultiplier: 1.4,
    defenseMultiplier: 1.1,
    speedMultiplier: 1.0,
    skills: [
      {
        id: 'fire_sting',
        name: '烈焰尾刺',
        description: '以灼热的尾刺攻击敌人，附带灼烧',
        type: 'attack',
        element: 'fire',
        mpCost: 20,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.2,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 20, duration: 3, statusType: 'burn', chance: 0.5 },
        ],
      },
      {
        id: 'venom_spray',
        name: '毒液喷射',
        description: '喷射灼热毒液，降低敌人防御',
        type: 'attack',
        element: 'fire',
        mpCost: 25,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 15, duration: 2, statusType: 'defense_down', chance: 0.4 },
        ],
      },
    ],
    expReward: 250,
    spiritStoneReward: 120,
    dropTable: [
      { itemId: 'fire_scorpion_venom', chance: 0.5, quantity: 1 },
      { itemId: 'fire_essence', chance: 0.3, quantity: 1 },
    ],
  },

  golden_crab: {
    id: 'golden_crab',
    name: '金甲蟹',
    description: '身披金色甲壳的巨型螃蟹，防御力极强',
    element: 'metal',
    level: 15,
    hpMultiplier: 2.5,
    attackMultiplier: 1.2,
    defenseMultiplier: 2.5,
    speedMultiplier: 0.6,
    skills: [
      {
        id: 'iron_clamp',
        name: '铁钳夹击',
        description: '以坚硬的蟹钳夹击敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 20,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 2,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'golden_shell',
        name: '金甲护体',
        description: '激发甲壳之力，大幅提升防御',
        type: 'defense',
        element: 'metal',
        mpCost: 30,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 60, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 300,
    spiritStoneReward: 150,
    dropTable: [
      { itemId: 'golden_crab_shell', chance: 0.5, quantity: 1 },
      { itemId: 'iron_ore', chance: 0.8, quantity: 3 },
    ],
  },

  thunder_eagle: {
    id: 'thunder_eagle',
    name: '雷鹰',
    description: '翱翔于雷云之间的妖禽，速度极快，攻击附带雷电之力',
    element: 'metal',
    level: 17,
    hpMultiplier: 1.0,
    attackMultiplier: 1.8,
    defenseMultiplier: 0.8,
    speedMultiplier: 2.0,
    skills: [
      {
        id: 'thunder_dive',
        name: '雷电俯冲',
        description: '携带雷电从高空俯冲攻击',
        type: 'attack',
        element: 'metal',
        mpCost: 25,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.8,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'chain_lightning',
        name: '连锁闪电',
        description: '释放连锁雷电攻击所有敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 35,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 1.5,
        hitCount: 1,
        targetType: 'all',
        effects: [],
      },
    ],
    expReward: 350,
    spiritStoneReward: 180,
    dropTable: [
      { itemId: 'thunder_eagle_feather', chance: 0.5, quantity: 1 },
      { itemId: 'spirit_essence', chance: 0.3, quantity: 2 },
    ],
  },

  jindan_cultivator: {
    id: 'jindan_cultivator',
    name: '金丹散修',
    description: '已凝结金丹的散修高手，实力不容小觑',
    element: 'neutral',
    level: 18,
    hpMultiplier: 2.0,
    attackMultiplier: 1.8,
    defenseMultiplier: 1.5,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'golden_core_blast',
        name: '金丹爆发',
        description: '引动金丹之力释放强大攻击',
        type: 'attack',
        element: 'neutral',
        mpCost: 30,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'sword_rain',
        name: '万剑归宗',
        description: '操控飞剑形成剑雨攻击所有敌人',
        type: 'ultimate',
        element: 'metal',
        mpCost: 50,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'all',
        effects: [],
      },
      {
        id: 'golden_core_shield',
        name: '金丹护罩',
        description: '以金丹之力形成护罩',
        type: 'defense',
        element: 'neutral',
        mpCost: 35,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 40, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 400,
    spiritStoneReward: 200,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 50 },
      { itemId: 'healing_pill_jindan', chance: 0.3, quantity: 1 },
      { itemId: 'jindan_pill', chance: 0.05, quantity: 1 },
    ],
  },

  // ==================== 元婴期敌人 (level 19-24) ====================

  dark_serpent: {
    id: 'dark_serpent',
    name: '冥蛇',
    description: '栖息于幽冥之地的巨蛇，剧毒无比，能腐蚀灵力',
    element: 'water',
    level: 19,
    hpMultiplier: 1.5,
    attackMultiplier: 1.6,
    defenseMultiplier: 1.2,
    speedMultiplier: 1.5,
    skills: [
      {
        id: 'venom_fang',
        name: '冥毒噬咬',
        description: '以浸透冥毒的獠牙攻击敌人',
        type: 'attack',
        element: 'water',
        mpCost: 30,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 30, duration: 3, statusType: 'poison', chance: 0.6 },
        ],
      },
      {
        id: 'serpent_coil',
        name: '蛇缠',
        description: '以巨大的身躯缠绕敌人，使其无法行动',
        type: 'support',
        element: 'water',
        mpCost: 40,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'single',
        effects: [
          { type: 'debuff', value: 30, duration: 2, statusType: 'speed_down', chance: 0.7 },
        ],
      },
    ],
    expReward: 500,
    spiritStoneReward: 250,
    dropTable: [
      { itemId: 'snake_gallbladder', chance: 0.4, quantity: 1 },
      { itemId: 'demon_blood', chance: 0.6, quantity: 2 },
    ],
  },

  soul_bat: {
    id: 'soul_bat',
    name: '噬魂蝠',
    description: '以吞噬灵魂为食的妖蝠，攻击会削弱灵力',
    element: 'neutral',
    level: 21,
    hpMultiplier: 1.2,
    attackMultiplier: 2.0,
    defenseMultiplier: 0.8,
    speedMultiplier: 1.8,
    skills: [
      {
        id: 'soul_drain',
        name: '噬魂术',
        description: '吞噬敌人灵魂造成伤害并恢复自身',
        type: 'attack',
        element: 'neutral',
        mpCost: 35,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.8,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'heal', value: 40, chance: 1.0 },
        ],
      },
      {
        id: 'sonic_screech',
        name: '灵魂尖啸',
        description: '发出撕裂灵魂的尖啸，攻击所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 45,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 1.8,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 20, duration: 2, statusType: 'attack_down', chance: 0.4 },
        ],
      },
    ],
    expReward: 600,
    spiritStoneReward: 300,
    dropTable: [
      { itemId: 'soul_crystal', chance: 0.4, quantity: 1 },
      { itemId: 'demon_core', chance: 0.3, quantity: 1 },
    ],
  },

  millennium_treant: {
    id: 'millennium_treant',
    name: '千年树妖',
    description: '修炼千年的古树成精，根系深入大地，生命力极为旺盛',
    element: 'wood',
    level: 23,
    hpMultiplier: 3.5,
    attackMultiplier: 1.5,
    defenseMultiplier: 2.0,
    speedMultiplier: 0.5,
    skills: [
      {
        id: 'root_bind',
        name: '根系缠绕',
        description: '从地下伸出根系缠绕所有敌人',
        type: 'attack',
        element: 'wood',
        mpCost: 35,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.8,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 2, statusType: 'speed_down', chance: 0.5 },
        ],
      },
      {
        id: 'life_absorption',
        name: '生机汲取',
        description: '汲取大地生机恢复自身生命',
        type: 'support',
        element: 'wood',
        mpCost: 40,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 50, duration: 3, chance: 1.0 },
        ],
      },
      {
        id: 'ancient_slam',
        name: '古木横扫',
        description: '以巨大的枝干横扫敌人',
        type: 'attack',
        element: 'wood',
        mpCost: 30,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
    ],
    expReward: 750,
    spiritStoneReward: 400,
    dropTable: [
      { itemId: 'millennium_tree_heart', chance: 0.3, quantity: 1 },
      { itemId: 'lingzhi', chance: 0.8, quantity: 3 },
      { itemId: 'blood_ginseng', chance: 0.4, quantity: 1 },
    ],
  },

  yuanying_elder: {
    id: 'yuanying_elder',
    name: '元婴老怪',
    description: '已凝结元婴的老怪物，实力深不可测，掌握多种强大法术',
    element: 'neutral',
    level: 24,
    hpMultiplier: 3.0,
    attackMultiplier: 2.2,
    defenseMultiplier: 1.8,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'yuanying_strike',
        name: '元婴出窍',
        description: '元婴离体发动毁灭性攻击',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 60,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'spatial_tear',
        name: '空间裂斩',
        description: '撕裂空间造成范围伤害',
        type: 'attack',
        element: 'neutral',
        mpCost: 45,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'all',
        effects: [],
      },
      {
        id: 'spirit_shield',
        name: '元神护体',
        description: '以元神之力形成护盾',
        type: 'defense',
        element: 'neutral',
        mpCost: 40,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 60, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 1000,
    spiritStoneReward: 500,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 200 },
      { itemId: 'demon_core', chance: 0.6, quantity: 2 },
      { itemId: 'yuanying_pill', chance: 0.03, quantity: 1 },
    ],
  },

  // ==================== 化神期敌人 (level 25-30) ====================

  sky_wolf: {
    id: 'sky_wolf',
    name: '天狼',
    description: '传说中的天狼星降临化身，身形如山岳般巨大，獠牙可撕裂虚空',
    element: 'metal',
    level: 25,
    hpMultiplier: 2.5,
    attackMultiplier: 2.2,
    defenseMultiplier: 1.5,
    speedMultiplier: 1.6,
    skills: [
      {
        id: 'celestial_fang',
        name: '天狼噬',
        description: '以天狼之牙撕裂一切',
        type: 'attack',
        element: 'metal',
        mpCost: 40,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'howling_storm',
        name: '天狼啸月',
        description: '仰天长啸引发天地异变，攻击所有敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 55,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 20, duration: 2, statusType: 'defense_down', chance: 0.5 },
        ],
      },
      {
        id: 'wolf_fury',
        name: '狂暴本能',
        description: '激发天狼血脉，大幅提升攻击力',
        type: 'support',
        element: 'neutral',
        mpCost: 35,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 50, duration: 3, statusType: 'attack_up' },
        ],
      },
    ],
    expReward: 1200,
    spiritStoneReward: 600,
    dropTable: [
      { itemId: 'wolf_fang', chance: 1.0, quantity: 5 },
      { itemId: 'demon_core', chance: 0.5, quantity: 2 },
    ],
  },

  nine_tail_fox: {
    id: 'nine_tail_fox',
    name: '九尾妖狐',
    description: '修炼数千年的妖狐，九尾齐出时可幻化万象，迷惑人心',
    element: 'fire',
    level: 27,
    hpMultiplier: 2.0,
    attackMultiplier: 2.5,
    defenseMultiplier: 1.2,
    speedMultiplier: 1.8,
    skills: [
      {
        id: 'fox_fire',
        name: '狐火焚天',
        description: '释放九尾妖火焚烧敌人',
        type: 'attack',
        element: 'fire',
        mpCost: 50,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 40, duration: 3, statusType: 'burn', chance: 0.6 },
        ],
      },
      {
        id: 'illusion',
        name: '幻术迷心',
        description: '施展幻术迷惑敌人，降低攻击和速度',
        type: 'support',
        element: 'neutral',
        mpCost: 45,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 3, statusType: 'attack_down', chance: 0.5 },
          { type: 'debuff', value: 20, duration: 3, statusType: 'speed_down', chance: 0.5 },
        ],
      },
      {
        id: 'charm_strike',
        name: '魅影连击',
        description: '化出分身进行连续攻击',
        type: 'attack',
        element: 'fire',
        mpCost: 55,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 1.8,
        hitCount: 3,
        targetType: 'random',
        effects: [],
      },
    ],
    expReward: 1500,
    spiritStoneReward: 800,
    dropTable: [
      { itemId: 'fox_spirit_orb', chance: 0.3, quantity: 1 },
      { itemId: 'demon_blood', chance: 0.8, quantity: 3 },
      { itemId: 'phoenix_blood', chance: 0.05, quantity: 1 },
    ],
  },

  fallen_immortal: {
    id: 'fallen_immortal',
    name: '堕落仙人',
    description: '曾经的仙界存在，因堕落而被逐出仙界，虽然力量衰退但仍远超凡人',
    element: 'neutral',
    level: 29,
    hpMultiplier: 3.0,
    attackMultiplier: 2.8,
    defenseMultiplier: 2.0,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'immortal_strike',
        name: '仙诀残影',
        description: '施展残留的仙家手段，威力依然惊人',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 70,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 5.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'corruption_wave',
        name: '堕落之波',
        description: '释放腐化之力侵蚀所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 55,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 35, duration: 3, statusType: 'poison', chance: 0.5 },
        ],
      },
      {
        id: 'fallen_barrier',
        name: '仙界残垣',
        description: '残留的仙界屏障，提供强大防护',
        type: 'defense',
        element: 'neutral',
        mpCost: 50,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 80, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 2000,
    spiritStoneReward: 1000,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 500 },
      { itemId: 'phoenix_blood', chance: 0.1, quantity: 1 },
    ],
  },

  huashen_demon_lord: {
    id: 'huashen_demon_lord',
    name: '化神魔尊',
    description: '化神期的魔道至尊，掌控魔道法则，一念之间可覆灭山河',
    element: 'fire',
    level: 30,
    hpMultiplier: 4.0,
    attackMultiplier: 3.0,
    defenseMultiplier: 2.5,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'demon_domain',
        name: '魔域降临',
        description: '展开魔域，对所有敌人造成毁灭性打击',
        type: 'ultimate',
        element: 'fire',
        mpCost: 80,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 30, duration: 3, statusType: 'attack_down', chance: 0.6 },
        ],
      },
      {
        id: 'hellfire',
        name: '地狱业火',
        description: '召唤地狱业火焚烧一切',
        type: 'attack',
        element: 'fire',
        mpCost: 60,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 50, duration: 3, statusType: 'burn', chance: 0.7 },
        ],
      },
      {
        id: 'demon_regeneration',
        name: '魔体再生',
        description: '魔尊的恢复能力，持续回复生命',
        type: 'support',
        element: 'neutral',
        mpCost: 50,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 80, duration: 3, chance: 1.0 },
        ],
      },
    ],
    expReward: 2500,
    spiritStoneReward: 1200,
    dropTable: [
      { itemId: 'demon_core', chance: 1.0, quantity: 3 },
      { itemId: 'demon_blood', chance: 1.0, quantity: 5 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 800 },
    ],
  },

  // ==================== 化神修罗场敌人 (level 25-28) ====================

  shura_warrior: {
    id: 'shura_warrior',
    name: '修罗战士',
    description: '修罗场中的基础战士，身披血红战甲，战意凌厉',
    element: 'fire',
    level: 25,
    hpMultiplier: 1.8,
    attackMultiplier: 2.0,
    defenseMultiplier: 1.4,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'shura_slash',
        name: '修罗斩',
        description: '以修罗之力斩出凌厉一击',
        type: 'attack',
        element: 'fire',
        mpCost: 35,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 2.8,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'blood_frenzy',
        name: '血怒',
        description: '进入狂暴状态，提升攻击力',
        type: 'support',
        element: 'fire',
        mpCost: 30,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 35, duration: 3, statusType: 'attack_up' },
        ],
      },
    ],
    expReward: 1100,
    spiritStoneReward: 550,
    dropTable: [
      { itemId: 'shura_blood', chance: 0.4, quantity: 1 },
      { itemId: 'fire_essence', chance: 0.5, quantity: 2 },
    ],
  },

  shura_general: {
    id: 'shura_general',
    name: '修罗将军',
    description: '修罗军团的统领，身经百战，杀气冲天',
    element: 'fire',
    level: 26,
    hpMultiplier: 2.5,
    attackMultiplier: 2.3,
    defenseMultiplier: 1.8,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'shura_storm',
        name: '修罗风暴',
        description: '掀起血色风暴攻击所有敌人',
        type: 'attack',
        element: 'fire',
        mpCost: 50,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 2.2,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 35, duration: 3, statusType: 'burn', chance: 0.5 },
        ],
      },
      {
        id: 'war_cry',
        name: '战吼',
        description: '发出震慑敌人的战吼，降低敌人攻击和防御',
        type: 'support',
        element: 'neutral',
        mpCost: 40,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 20, duration: 3, statusType: 'attack_down', chance: 0.6 },
          { type: 'debuff', value: 15, duration: 3, statusType: 'defense_down', chance: 0.6 },
        ],
      },
      {
        id: 'execute',
        name: '处决',
        description: '对单一目标发动致命一击',
        type: 'attack',
        element: 'fire',
        mpCost: 45,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
    ],
    expReward: 1400,
    spiritStoneReward: 700,
    dropTable: [
      { itemId: 'shura_blood', chance: 0.6, quantity: 1 },
      { itemId: 'demon_core', chance: 0.4, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 300 },
    ],
  },

  flame_demon: {
    id: 'flame_demon',
    name: '炎魔',
    description: '由炼狱业火凝聚而成的恐怖存在，浑身燃烧着永不熄灭的火焰',
    element: 'fire',
    level: 26,
    hpMultiplier: 2.0,
    attackMultiplier: 2.5,
    defenseMultiplier: 1.3,
    speedMultiplier: 1.4,
    skills: [
      {
        id: 'inferno_blast',
        name: '地狱火焰',
        description: '释放地狱之火焚烧敌人',
        type: 'attack',
        element: 'fire',
        mpCost: 45,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 45, duration: 3, statusType: 'burn', chance: 0.7 },
        ],
      },
      {
        id: 'flame_wave',
        name: '炎浪',
        description: '释放火焰波动攻击所有敌人',
        type: 'attack',
        element: 'fire',
        mpCost: 55,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 30, duration: 2, statusType: 'burn', chance: 0.5 },
        ],
      },
    ],
    expReward: 1300,
    spiritStoneReward: 650,
    dropTable: [
      { itemId: 'fire_essence', chance: 0.8, quantity: 3 },
      { itemId: 'demon_blood', chance: 0.5, quantity: 2 },
    ],
  },

  golden_puppet: {
    id: 'golden_puppet',
    name: '金甲傀儡',
    description: '以金属灵材炼制的战斗傀儡，防御极为坚固，攻击力惊人',
    element: 'metal',
    level: 27,
    hpMultiplier: 3.0,
    attackMultiplier: 2.0,
    defenseMultiplier: 2.8,
    speedMultiplier: 0.7,
    skills: [
      {
        id: 'metal_fist',
        name: '金刚重拳',
        description: '以坚硬的金属拳头重击敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 40,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.2,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'iron_defense',
        name: '铁壁',
        description: '激发金属护甲，大幅提升防御',
        type: 'defense',
        element: 'metal',
        mpCost: 50,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 70, duration: 3, statusType: 'defense_up' },
        ],
      },
      {
        id: 'shockwave',
        name: '金属震波',
        description: '释放金属能量震波攻击所有敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 60,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 20, duration: 2, statusType: 'speed_down', chance: 0.5 },
        ],
      },
    ],
    expReward: 1500,
    spiritStoneReward: 750,
    dropTable: [
      { itemId: 'iron_ore', chance: 1.0, quantity: 5 },
      { itemId: 'golem_core', chance: 0.5, quantity: 1 },
      { itemId: 'golden_crab_shell', chance: 0.3, quantity: 1 },
    ],
  },

  shura_king: {
    id: 'shura_king',
    name: '修罗王',
    description: '修罗界的至高霸主，身负无尽杀戮之力，战场上的绝对王者',
    element: 'fire',
    level: 28,
    hpMultiplier: 4.0,
    attackMultiplier: 2.8,
    defenseMultiplier: 2.2,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'shura_domain',
        name: '修罗领域',
        description: '展开修罗领域，对所有敌人造成毁灭性打击',
        type: 'ultimate',
        element: 'fire',
        mpCost: 75,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 3, statusType: 'defense_down', chance: 0.6 },
        ],
      },
      {
        id: 'blood_sacrifice',
        name: '血祭',
        description: '以血为引，发动致命攻击并回复自身',
        type: 'attack',
        element: 'fire',
        mpCost: 55,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'heal', value: 50, chance: 1.0 },
        ],
      },
      {
        id: 'king_wrath',
        name: '王者之怒',
        description: '激发王者之力，大幅提升攻击力和速度',
        type: 'support',
        element: 'fire',
        mpCost: 50,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 50, duration: 3, statusType: 'attack_up' },
          { type: 'buff', value: 30, duration: 3, statusType: 'speed_up' },
        ],
      },
    ],
    expReward: 2200,
    spiritStoneReward: 1100,
    dropTable: [
      { itemId: 'shura_blood', chance: 1.0, quantity: 3 },
      { itemId: 'demon_core', chance: 0.7, quantity: 2 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 600 },
      { itemId: 'huashen_pill', chance: 0.03, quantity: 1 },
    ],
  },

  // ==================== 合体期敌人 (level 31-32) ====================

  ancient_dragon: {
    id: 'ancient_dragon',
    name: '远古巨龙',
    description: '沉睡万年的远古巨龙，体型遮天蔽日，鳞甲坚如神铁',
    element: 'fire',
    level: 31,
    hpMultiplier: 5.0,
    attackMultiplier: 3.0,
    defenseMultiplier: 3.0,
    speedMultiplier: 1.0,
    skills: [
      {
        id: 'dragon_breath',
        name: '龙息吐息',
        description: '喷吐毁灭性的龙息，焚烧一切',
        type: 'ultimate',
        element: 'fire',
        mpCost: 80,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 4.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 60, duration: 3, statusType: 'burn', chance: 0.8 },
        ],
      },
      {
        id: 'tail_sweep',
        name: '龙尾横扫',
        description: '以巨大的龙尾横扫敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 50,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'all',
        effects: [],
      },
      {
        id: 'dragon_scales',
        name: '龙鳞护体',
        description: '激发龙鳞之力，获得极强防护',
        type: 'defense',
        element: 'earth',
        mpCost: 60,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 100, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 3000,
    spiritStoneReward: 1500,
    dropTable: [
      { itemId: 'dragon_scale', chance: 0.3, quantity: 1 },
      { itemId: 'demon_core', chance: 0.8, quantity: 3 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1000 },
    ],
  },

  thunder_puppet: {
    id: 'thunder_puppet',
    name: '天雷傀儡',
    description: '以天雷之力驱动的上古傀儡，全身缠绕着紫色雷电，攻防兼备',
    element: 'metal',
    level: 31,
    hpMultiplier: 4.0,
    attackMultiplier: 2.8,
    defenseMultiplier: 3.5,
    speedMultiplier: 0.9,
    skills: [
      {
        id: 'thunder_fist',
        name: '雷霆重拳',
        description: '以雷电灌注的铁拳轰击目标',
        type: 'attack',
        element: 'metal',
        mpCost: 50,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'lightning_field',
        name: '雷电领域',
        description: '展开雷电力场，攻击所有敌人并降低速度',
        type: 'attack',
        element: 'metal',
        mpCost: 70,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 2, statusType: 'speed_down', chance: 0.6 },
        ],
      },
      {
        id: 'thunder_shield',
        name: '雷盾',
        description: '以天雷之力凝成护盾，大幅提升防御',
        type: 'defense',
        element: 'metal',
        mpCost: 55,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 100, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 3000,
    spiritStoneReward: 1500,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.2, quantity: 1 },
      { itemId: 'golem_core', chance: 0.6, quantity: 2 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1000 },
    ],
  },

  jiuyou_demon_general: {
    id: 'jiuyou_demon_general',
    name: '九幽魔将',
    description: '来自九幽地狱的魔族将领，统率万千阴兵，杀气冲天',
    element: 'water',
    level: 32,
    hpMultiplier: 4.5,
    attackMultiplier: 3.2,
    defenseMultiplier: 2.5,
    speedMultiplier: 1.4,
    skills: [
      {
        id: 'nether_slash',
        name: '幽冥斩',
        description: '以九幽之力劈出致命一刀，切割灵魂',
        type: 'attack',
        element: 'water',
        mpCost: 55,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.8,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 50, duration: 3, statusType: 'poison', chance: 0.5 },
        ],
      },
      {
        id: 'ghost_army',
        name: '召唤阴兵',
        description: '召唤九幽阴兵围攻所有敌人',
        type: 'ultimate',
        element: 'water',
        mpCost: 85,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 2,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 2, statusType: 'attack_down', chance: 0.5 },
        ],
      },
      {
        id: 'nether_armor',
        name: '幽冥战甲',
        description: '以阴气凝聚的战甲护体，同时提升攻防',
        type: 'support',
        element: 'water',
        mpCost: 50,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 80, duration: 3, statusType: 'defense_up' },
          { type: 'buff', value: 40, duration: 3, statusType: 'attack_up' },
        ],
      },
    ],
    expReward: 3500,
    spiritStoneReward: 1800,
    dropTable: [
      { itemId: 'soul_crystal', chance: 0.5, quantity: 2 },
      { itemId: 'demon_blood', chance: 0.8, quantity: 4 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1200 },
    ],
  },

  chaos_beast: {
    id: 'chaos_beast',
    name: '混沌兽',
    description: '诞生于混沌之中的太古异兽，形态不定，力量狂暴无比',
    element: 'neutral',
    level: 32,
    hpMultiplier: 5.5,
    attackMultiplier: 3.0,
    defenseMultiplier: 2.8,
    speedMultiplier: 1.1,
    skills: [
      {
        id: 'chaos_claw',
        name: '混沌利爪',
        description: '以蕴含混沌之力的利爪撕裂一切',
        type: 'attack',
        element: 'neutral',
        mpCost: 55,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 2,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'chaos_roar',
        name: '混沌咆哮',
        description: '发出震碎虚空的咆哮，对所有敌人造成伤害',
        type: 'attack',
        element: 'neutral',
        mpCost: 75,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 2.8,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 20, duration: 2, statusType: 'defense_down', chance: 0.6 },
        ],
      },
      {
        id: 'chaos_devour',
        name: '混沌吞噬',
        description: '吞噬天地灵气，恢复自身生命',
        type: 'support',
        element: 'neutral',
        mpCost: 60,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 100, duration: 3, chance: 1.0 },
        ],
      },
    ],
    expReward: 3500,
    spiritStoneReward: 1800,
    dropTable: [
      { itemId: 'chaos_essence', chance: 0.1, quantity: 1 },
      { itemId: 'demon_core', chance: 0.8, quantity: 3 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1200 },
    ],
  },

  sky_demon: {
    id: 'sky_demon',
    name: '天魔',
    description: '来自魔界深渊的天魔，能侵蚀修士心境，以恐惧为食',
    element: 'neutral',
    level: 33,
    hpMultiplier: 4.0,
    attackMultiplier: 3.5,
    defenseMultiplier: 2.0,
    speedMultiplier: 1.5,
    skills: [
      {
        id: 'heart_demon',
        name: '心魔入侵',
        description: '入侵敌人心境，造成巨大精神伤害',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 90,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 5.0,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'debuff', value: 30, duration: 3, statusType: 'attack_down', chance: 0.7 },
        ],
      },
      {
        id: 'fear_wave',
        name: '恐惧之波',
        description: '释放恐惧波动，削弱所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 65,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 2.8,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 2, statusType: 'defense_down', chance: 0.5 },
          { type: 'debuff', value: 20, duration: 2, statusType: 'speed_down', chance: 0.5 },
        ],
      },
      {
        id: 'demon_feast',
        name: '恐惧盛宴',
        description: '吞噬敌人的恐惧恢复自身',
        type: 'attack',
        element: 'neutral',
        mpCost: 55,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'heal', value: 60, chance: 1.0 },
        ],
      },
    ],
    expReward: 4000,
    spiritStoneReward: 2000,
    dropTable: [
      { itemId: 'soul_crystal', chance: 0.5, quantity: 2 },
      { itemId: 'demon_core', chance: 1.0, quantity: 3 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1500 },
    ],
  },

  heti_powerhouse: {
    id: 'heti_powerhouse',
    name: '合体期大能',
    description: '达到合体期的绝世强者，已触及天地法则，一举一动间天地变色',
    element: 'neutral',
    level: 34,
    hpMultiplier: 5.0,
    attackMultiplier: 3.5,
    defenseMultiplier: 3.0,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'heaven_earth_merge',
        name: '天地合一',
        description: '融合天地之力发动毁灭一击',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 100,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 6.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'law_suppression',
        name: '法则镇压',
        description: '以法则之力镇压所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 75,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 30, duration: 3, statusType: 'defense_down', chance: 0.6 },
        ],
      },
      {
        id: 'dao_protection',
        name: '大道护身',
        description: '以大道之力护体，获得极强防御',
        type: 'defense',
        element: 'neutral',
        mpCost: 70,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 120, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 5000,
    spiritStoneReward: 2500,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 2000 },
      { itemId: 'dragon_scale', chance: 0.2, quantity: 1 },
      { itemId: 'phoenix_blood', chance: 0.15, quantity: 1 },
    ],
  },

  // ==================== 大乘期敌人 (level 33-34) ====================

  immortal_guard: {
    id: 'immortal_guard',
    name: '仙界守卫',
    description: '仙界派遣的守卫，身披金色仙铠，手持仙器，奉命镇守界域通道',
    element: 'metal',
    level: 33,
    hpMultiplier: 4.5,
    attackMultiplier: 3.3,
    defenseMultiplier: 3.5,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'immortal_sword',
        name: '仙剑斩',
        description: '以仙器长剑劈出蕴含仙力的剑气',
        type: 'attack',
        element: 'metal',
        mpCost: 60,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 3.8,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'golden_barrier',
        name: '金光结界',
        description: '展开金色结界，大幅提升防御',
        type: 'defense',
        element: 'metal',
        mpCost: 65,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 130, duration: 3, statusType: 'defense_up' },
        ],
      },
      {
        id: 'divine_judgment',
        name: '天罚',
        description: '以仙界权柄降下天罚，攻击所有敌人',
        type: 'ultimate',
        element: 'metal',
        mpCost: 90,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 25, duration: 2, statusType: 'attack_down', chance: 0.5 },
        ],
      },
    ],
    expReward: 4500,
    spiritStoneReward: 2200,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.2, quantity: 1 },
      { itemId: 'dragon_scale', chance: 0.15, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1500 },
    ],
  },

  ancient_demon_dragon: {
    id: 'ancient_demon_dragon',
    name: '太古妖龙',
    description: '太古时代遗留的妖龙，身躯绵延数里，每一片鳞甲都蕴含法则之力',
    element: 'fire',
    level: 34,
    hpMultiplier: 6.0,
    attackMultiplier: 3.5,
    defenseMultiplier: 3.2,
    speedMultiplier: 1.0,
    skills: [
      {
        id: 'ancient_dragon_breath',
        name: '太古龙息',
        description: '喷吐蕴含太古之力的龙息，毁灭一切',
        type: 'ultimate',
        element: 'fire',
        mpCost: 95,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 5.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 70, duration: 3, statusType: 'burn', chance: 0.8 },
        ],
      },
      {
        id: 'dragon_claw_strike',
        name: '龙爪撕裂',
        description: '以巨大龙爪撕裂目标',
        type: 'attack',
        element: 'fire',
        mpCost: 65,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 2,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'ancient_scales',
        name: '太古龙鳞',
        description: '太古龙鳞硬化，获得极致防御',
        type: 'defense',
        element: 'earth',
        mpCost: 70,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 140, duration: 3, statusType: 'defense_up' },
          { type: 'hot', value: 80, duration: 3, chance: 1.0 },
        ],
      },
    ],
    expReward: 5500,
    spiritStoneReward: 2800,
    dropTable: [
      { itemId: 'dragon_scale', chance: 0.4, quantity: 2 },
      { itemId: 'phoenix_blood', chance: 0.1, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 2000 },
    ],
  },

  void_rift_beast: {
    id: 'void_rift_beast',
    name: '虚空裂隙兽',
    description: '从虚空裂隙中诞生的异界生物，身体半透明，可以穿梭虚空',
    element: 'neutral',
    level: 34,
    hpMultiplier: 3.5,
    attackMultiplier: 4.0,
    defenseMultiplier: 1.8,
    speedMultiplier: 2.0,
    skills: [
      {
        id: 'void_tear',
        name: '虚空撕裂',
        description: '撕裂空间造成巨大伤害，无视部分防御',
        type: 'attack',
        element: 'neutral',
        mpCost: 60,
        cooldown: 3,
        currentCooldown: 0,
        damageMultiplier: 4.2,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'spatial_storm',
        name: '空间风暴',
        description: '引发空间风暴攻击所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 80,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 3.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 30, duration: 2, statusType: 'speed_down', chance: 0.6 },
        ],
      },
      {
        id: 'void_blink',
        name: '虚空闪现',
        description: '遁入虚空，大幅提升速度和闪避',
        type: 'support',
        element: 'neutral',
        mpCost: 50,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 60, duration: 3, statusType: 'speed_up' },
        ],
      },
    ],
    expReward: 5000,
    spiritStoneReward: 2500,
    dropTable: [
      { itemId: 'soul_crystal', chance: 0.4, quantity: 2 },
      { itemId: 'chaos_essence', chance: 0.08, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 1800 },
    ],
  },

  dacheng_cultivator: {
    id: 'dacheng_cultivator',
    name: '大乘期修士',
    description: '大道将成的绝世强者，举手投足间暗合天道，法力浩瀚无边',
    element: 'neutral',
    level: 34,
    hpMultiplier: 5.0,
    attackMultiplier: 3.8,
    defenseMultiplier: 3.0,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'dao_strike',
        name: '大道一击',
        description: '以大道之力发动毁灭性打击',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 100,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 6.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'heaven_pressure',
        name: '天威镇压',
        description: '以天威之力镇压所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 80,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 3.2,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 30, duration: 3, statusType: 'defense_down', chance: 0.6 },
          { type: 'debuff', value: 20, duration: 2, statusType: 'attack_down', chance: 0.5 },
        ],
      },
      {
        id: 'dao_barrier',
        name: '道法护体',
        description: '以道法凝成护体屏障',
        type: 'defense',
        element: 'neutral',
        mpCost: 70,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 120, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 5500,
    spiritStoneReward: 2800,
    dropTable: [
      { itemId: 'spirit_stone', chance: 1.0, quantity: 2000 },
      { itemId: 'dragon_scale', chance: 0.2, quantity: 1 },
      { itemId: 'dacheng_pill', chance: 0.03, quantity: 1 },
    ],
  },

  // ==================== 渡劫期敌人 (level 35) ====================

  tribulation_guardian: {
    id: 'tribulation_guardian',
    name: '天劫守护者',
    description: '天道降下的守护者，以天雷之力审判渡劫者，是天劫的具象化身',
    element: 'metal',
    level: 35,
    hpMultiplier: 5.0,
    attackMultiplier: 4.0,
    defenseMultiplier: 3.0,
    speedMultiplier: 1.5,
    skills: [
      {
        id: 'divine_thunder',
        name: '天雷灭世',
        description: '召唤天雷轰击所有敌人',
        type: 'ultimate',
        element: 'metal',
        mpCost: 100,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 5.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 80, duration: 3, statusType: 'burn', chance: 0.8 },
        ],
      },
      {
        id: 'judgment_bolt',
        name: '天道审判',
        description: '以天道之力审判目标',
        type: 'attack',
        element: 'metal',
        mpCost: 80,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 4.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'thunder_armor',
        name: '雷甲护体',
        description: '以天雷之力形成护甲',
        type: 'defense',
        element: 'metal',
        mpCost: 70,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 150, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 8000,
    spiritStoneReward: 4000,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.3, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 3000 },
      { itemId: 'dragon_scale', chance: 0.2, quantity: 1 },
    ],
  },

  dao_enforcer: {
    id: 'dao_enforcer',
    name: '天道执行者',
    description: '天道意志的化身，执行天道法则，审判逆天之人，不可理喻的力量',
    element: 'neutral',
    level: 35,
    hpMultiplier: 5.5,
    attackMultiplier: 4.2,
    defenseMultiplier: 3.5,
    speedMultiplier: 1.4,
    skills: [
      {
        id: 'dao_annihilation',
        name: '天道湮灭',
        description: '以天道之力湮灭一切，造成毁灭性伤害',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 110,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 6.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'law_chains',
        name: '法则锁链',
        description: '以法则之力束缚所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 85,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 30, duration: 2, statusType: 'speed_down', chance: 0.7 },
          { type: 'debuff', value: 25, duration: 2, statusType: 'attack_down', chance: 0.5 },
        ],
      },
      {
        id: 'dao_shield',
        name: '天道庇护',
        description: '获得天道庇护，极大提升防御',
        type: 'defense',
        element: 'neutral',
        mpCost: 75,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 160, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 9000,
    spiritStoneReward: 4500,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.4, quantity: 1 },
      { itemId: 'phoenix_blood', chance: 0.2, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 3500 },
    ],
  },

  tribulation_thunder_avatar: {
    id: 'tribulation_thunder_avatar',
    name: '劫雷化身',
    description: '天劫雷霆凝聚而成的意识体，拥有毁天灭地的雷霆之力',
    element: 'metal',
    level: 35,
    hpMultiplier: 4.5,
    attackMultiplier: 4.5,
    defenseMultiplier: 2.5,
    speedMultiplier: 1.8,
    skills: [
      {
        id: 'nine_heaven_thunder',
        name: '九天雷罚',
        description: '引动九天之雷降下雷罚，毁灭一切',
        type: 'ultimate',
        element: 'metal',
        mpCost: 100,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 5.5,
        hitCount: 3,
        targetType: 'random',
        effects: [
          { type: 'dot', value: 90, duration: 2, statusType: 'burn', chance: 0.7 },
        ],
      },
      {
        id: 'thunder_chain',
        name: '连环雷击',
        description: '释放连环雷电攻击所有敌人',
        type: 'attack',
        element: 'metal',
        mpCost: 75,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 3.5,
        hitCount: 1,
        targetType: 'all',
        effects: [],
      },
      {
        id: 'thunder_body',
        name: '雷体化身',
        description: '化为纯粹雷电之体，提升攻击和速度',
        type: 'support',
        element: 'metal',
        mpCost: 60,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'buff', value: 60, duration: 3, statusType: 'attack_up' },
          { type: 'buff', value: 40, duration: 3, statusType: 'speed_up' },
        ],
      },
    ],
    expReward: 8500,
    spiritStoneReward: 4200,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.5, quantity: 2 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 3000 },
    ],
  },

  // ==================== 仙人期敌人 (level 36) ====================

  tribulation_demon_king: {
    id: 'tribulation_demon_king',
    name: '渡劫魔君',
    description: '正在渡劫的魔道至强者，身负天劫雷霆与魔道至高法力，是最危险的存在',
    element: 'fire',
    level: 36,
    hpMultiplier: 6.0,
    attackMultiplier: 4.5,
    defenseMultiplier: 3.5,
    speedMultiplier: 1.3,
    skills: [
      {
        id: 'demon_tribulation',
        name: '魔劫天降',
        description: '引动天劫与魔力融合，释放毁天灭地的一击',
        type: 'ultimate',
        element: 'fire',
        mpCost: 120,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 7.0,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'annihilation_wave',
        name: '灭世魔波',
        description: '释放灭世级别的魔气波动',
        type: 'attack',
        element: 'fire',
        mpCost: 90,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 100, duration: 3, statusType: 'burn', chance: 0.7 },
        ],
      },
      {
        id: 'demon_king_rebirth',
        name: '魔君重生',
        description: '魔君的不死之力，大幅回复生命',
        type: 'support',
        element: 'neutral',
        mpCost: 80,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 150, duration: 3, chance: 1.0 },
          { type: 'buff', value: 50, duration: 3, statusType: 'attack_up' },
        ],
      },
    ],
    expReward: 12000,
    spiritStoneReward: 6000,
    dropTable: [
      { itemId: 'thunder_essence', chance: 0.5, quantity: 1 },
      { itemId: 'phoenix_blood', chance: 0.3, quantity: 1 },
      { itemId: 'dragon_scale', chance: 0.3, quantity: 1 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 5000 },
    ],
  },

  fallen_true_immortal: {
    id: 'fallen_true_immortal',
    name: '堕落真仙',
    description: '曾经飞升仙界的真仙，因触犯仙规被贬落凡间，虽修为大降但仍拥有超凡之力',
    element: 'neutral',
    level: 36,
    hpMultiplier: 7.0,
    attackMultiplier: 4.8,
    defenseMultiplier: 3.8,
    speedMultiplier: 1.5,
    skills: [
      {
        id: 'immortal_technique',
        name: '仙术残章',
        description: '施展残留的仙界神通，威力震古烁今',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 130,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 7.5,
        hitCount: 1,
        targetType: 'single',
        effects: [],
      },
      {
        id: 'celestial_wave',
        name: '仙威震慑',
        description: '释放仙人之威，压制所有敌人',
        type: 'attack',
        element: 'neutral',
        mpCost: 95,
        cooldown: 5,
        currentCooldown: 0,
        damageMultiplier: 4.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'debuff', value: 35, duration: 3, statusType: 'attack_down', chance: 0.6 },
          { type: 'debuff', value: 30, duration: 3, statusType: 'defense_down', chance: 0.6 },
        ],
      },
      {
        id: 'immortal_body',
        name: '仙体不朽',
        description: '激发仙体之力，大幅回复生命并提升全属性',
        type: 'support',
        element: 'neutral',
        mpCost: 90,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 200, duration: 3, chance: 1.0 },
          { type: 'buff', value: 50, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 15000,
    spiritStoneReward: 8000,
    dropTable: [
      { itemId: 'phoenix_blood', chance: 0.4, quantity: 1 },
      { itemId: 'dragon_scale', chance: 0.4, quantity: 1 },
      { itemId: 'thunder_essence', chance: 0.5, quantity: 2 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 8000 },
    ],
  },

  chaos_demon_god: {
    id: 'chaos_demon_god',
    name: '混沌魔神',
    description: '太古时代的混沌魔神，拥有毁灭世界的力量，是凡人所能面对的最强存在',
    element: 'fire',
    level: 36,
    hpMultiplier: 8.0,
    attackMultiplier: 5.0,
    defenseMultiplier: 4.0,
    speedMultiplier: 1.2,
    skills: [
      {
        id: 'chaos_destruction',
        name: '混沌灭世',
        description: '释放混沌本源之力，毁灭一切存在',
        type: 'ultimate',
        element: 'neutral',
        mpCost: 150,
        cooldown: 7,
        currentCooldown: 0,
        damageMultiplier: 8.0,
        hitCount: 1,
        targetType: 'all',
        effects: [
          { type: 'dot', value: 120, duration: 3, statusType: 'burn', chance: 0.8 },
        ],
      },
      {
        id: 'chaos_flame',
        name: '混沌魔焰',
        description: '燃烧混沌之火焚毁一切',
        type: 'attack',
        element: 'fire',
        mpCost: 100,
        cooldown: 4,
        currentCooldown: 0,
        damageMultiplier: 5.0,
        hitCount: 1,
        targetType: 'single',
        effects: [
          { type: 'dot', value: 100, duration: 3, statusType: 'burn', chance: 0.8 },
        ],
      },
      {
        id: 'chaos_rebirth',
        name: '混沌再生',
        description: '以混沌之力再生，恢复大量生命并强化自身',
        type: 'support',
        element: 'neutral',
        mpCost: 100,
        cooldown: 6,
        currentCooldown: 0,
        damageMultiplier: 0,
        hitCount: 0,
        targetType: 'self',
        effects: [
          { type: 'hot', value: 250, duration: 3, chance: 1.0 },
          { type: 'buff', value: 60, duration: 3, statusType: 'attack_up' },
          { type: 'buff', value: 80, duration: 3, statusType: 'defense_up' },
        ],
      },
    ],
    expReward: 20000,
    spiritStoneReward: 10000,
    dropTable: [
      { itemId: 'chaos_essence', chance: 0.3, quantity: 1 },
      { itemId: 'phoenix_blood', chance: 0.5, quantity: 1 },
      { itemId: 'dragon_scale', chance: 0.5, quantity: 2 },
      { itemId: 'thunder_essence', chance: 0.5, quantity: 2 },
      { itemId: 'spirit_stone', chance: 1.0, quantity: 10000 },
    ],
  },
};

// 根据玩家境界计算敌人基础属性
// 使用指数增长匹配玩家属性曲线
export function calculateEnemyStats(level: number): {
  hp: number;
  mp: number;
  attack: number;
  defense: number;
  speed: number;
} {
  const baseHp = 80 * Math.pow(1.25, level - 1);
  const baseMp = 20 + level * 10;
  const baseAttack = 12 * Math.pow(1.22, level - 1);
  const baseDefense = 6 * Math.pow(1.18, level - 1);
  const baseSpeed = 10 * Math.pow(1.08, level - 1);

  return {
    hp: Math.floor(baseHp),
    mp: Math.floor(baseMp),
    attack: Math.floor(baseAttack),
    defense: Math.floor(baseDefense),
    speed: Math.floor(baseSpeed),
  };
}

// 从模板创建敌人实例
export function createEnemyFromTemplate(template: EnemyTemplate, levelBonus: number = 0): Combatant {
  const effectiveLevel = template.level + levelBonus;
  const stats = calculateEnemyStats(effectiveLevel);

  return {
    id: uuidv4(),
    name: template.name,
    isPlayer: false,
    isAlly: false,

    hp: Math.floor(stats.hp * template.hpMultiplier),
    maxHp: Math.floor(stats.hp * template.hpMultiplier),
    mp: Math.floor(stats.mp),
    maxMp: Math.floor(stats.mp),
    attack: Math.floor(stats.attack * template.attackMultiplier),
    defense: Math.floor(stats.defense * template.defenseMultiplier),
    speed: Math.floor(stats.speed * template.speedMultiplier),
    critRate: 0.05,
    critDamage: 1.5,

    element: template.element,
    skills: template.skills.map(s => ({ ...s, currentCooldown: 0 })),
    buffs: [],
    debuffs: [],

    isAlive: true,
    actionGauge: Math.random() * 10,
  };
}

// 生成随机遭遇
export function generateRandomEncounter(playerLevel: number, difficulty: number = 1): Combatant[] {
  const templateKeys = Object.keys(ENEMY_TEMPLATES);

  // 根据玩家等级筛选合适的敌人
  const suitableTemplates = templateKeys.filter(key => {
    const template = ENEMY_TEMPLATES[key];
    return template.level <= playerLevel + 2 && template.level >= Math.max(0, playerLevel - 2);
  });

  if (suitableTemplates.length === 0) {
    // 如果没有合适的敌人，使用最低级的
    suitableTemplates.push('wild_rabbit', 'wild_chicken', 'wild_boar');
  }

  // 根据难度和玩家等级决定敌人数量
  // 低等级玩家更容易遇到单个敌人
  let enemyCount: number;
  if (playerLevel <= 1) {
    // 炼气初期：70%几率1个敌人，30%几率2个
    enemyCount = Math.random() < 0.7 ? 1 : 2;
  } else if (playerLevel <= 3) {
    // 炼气中后期：50%几率1个，50%几率2个
    enemyCount = Math.random() < 0.5 ? 1 : 2;
  } else {
    // 更高境界：1-3个敌人
    enemyCount = Math.min(3, Math.ceil(Math.random() * difficulty + 1));
  }

  const enemies: Combatant[] = [];

  for (let i = 0; i < enemyCount; i++) {
    const templateKey = suitableTemplates[Math.floor(Math.random() * suitableTemplates.length)];
    const template = ENEMY_TEMPLATES[templateKey];
    const levelBonus = Math.floor(Math.random() * 2) - 1; // -1 到 0
    enemies.push(createEnemyFromTemplate(template, levelBonus));
  }

  return enemies;
}
